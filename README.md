# flask_api_with_mongo

Скрипт запускает телеграм бота, через который пользователи могут запускать
поиск свободных окон в визовом центре Италии https://ru.almaviva-visa.services. 

## Installation
1. Клонируйте репозиторий:
```bash
git clone https://github.com/codingoleg/Almaviva_VAC_bot.git
```
2. Перейдите в него:
```bash
cd .\Almaviva_VAC_bot\
```
Далее возможны 2 способа запуска:
+ Способ 1 - запуск напрямую. Установите зависимости:
```bash
pip install -r requirements.txt
```
Отредактируйте config.py:
```python
key = 'любой ключ для шифрования'
salt = 'любая соль для шифрования'
redis_host = 'localhost'
bot_storage_host = 'localhost'
admin_id = 'ваш телеграм ID'
token = 'токен бота'
```
Запустите Redis локально. Запустите основной скрипт:
```python
python main.py
```
+ Способ 2 - через docker. Отредактируйте config.py:
```python
redis_host = 'redis'
bot_storage_host = 'redis'
```
Отредактируйте Dockerfile:
```python
ENV admin_id='ваш телеграм ID'
ENV key='любой ключ для шифрования'
ENV salt='любая соль для шифрования'
ENV token='токен бота'
```
Соберите образ docker-compose и запустите оба контейнера.
## Usage
1. Зайдите на https://ru.almaviva-visa.services. Во всплывающем окне
внимательно прочитайте информацию о городе вашей регистрации и нажмите на
соответствующую ссылку. Если вы остались на том же сайте, создайте учетную 
запись. Если же вас перенаправило на https://italy-vms.ru/, 
данный скрипт вам не подойдет.
2. Найдите в телеграме бота https://t.me/Almaviva_VAC_bot или собственного
бота, указанного в токене. Запустите командой /start. Заполните все данные.
Запустится сканирование, которое может длиться неопределенное время. Успешная
запись зависит исключительно оттого, отменит ли кто-то запись в визовый центр
во время сканирования, или визовый центр выложит новые свободные окна.  

## Contributing
Баг репорты и пул реквесты приветствуются

## License
GNU GPLv3 